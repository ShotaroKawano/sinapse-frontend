(function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],d=0,h=[];d<s.length;d++)a=s[d],o[a]&&h.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/flowchart-vue/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1aaf":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"body{background-color:#1f1f1f}#svg{height:100%;width:100%}#chart{position:relative;top:0;width:100%;height:200vh;border:1px solid #dfdfdf}#position{position:absolute;right:4px}.unselectable{moz-user-select:-moz-none;-moz-user-select:none;-o-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.connector{cursor:crosshair;opacity:0}.connector.active{opacity:1;fill:#fff;stroke:#bbb;stroke-width:1px}.connector:hover{stroke:red}#svg .selection{stroke:#add8e6;fill:#add8e6;fill-opacity:.8;display:none}#svg .selection.active{display:block}",""])},"369f":function(e,t,n){"use strict";var r=n("50c4"),o=n.n(r);o.a},3900:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".modal{border:1px solid #fff;background-color:#353535;position:absolute;top:14vh;right:3%;margin-left:auto;margin-right:auto;width:30%;height:70vh;border-radius:6px;color:#fff}.thumbnail{width:100%;height:200px;text-align:center}.thumbnail>img{width:300px;height:200px;object-fit:cover}.form-control{display:block;width:100%;height:30px;margin-bottom:10px;background-color:#707070;color:#fff}.footer{padding:10px;text-align:right}.footer>button{margin-left:10px}.body,.header{padding:10px}.header{border-bottom:1px solid #d3d3d3}",""])},"50c4":function(e,t,n){var r=n("1aaf");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=n("499e").default;o("3d8912d2",r,!0,{sourceMap:!1,shadowMode:!1})},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("a026"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("h1",{staticClass:"title"},[e._v("Flowchart Vue")]),n("div",{attrs:{id:"toolbar"}},[n("button",{on:{click:function(t){e.$refs.chart.add({id:+new Date,x:10,y:10,thumbnail:"https://placehold.jp/150x100.png",url:"",name:"Title",summary:"Summary"})}}},[e._v("\n      Add(Double-click canvas)\n    ")]),n("button",{on:{click:function(t){return e.$refs.chart.remove()}}},[e._v("Delete(Del)")]),n("button",{on:{click:function(t){return e.$refs.chart.editCurrent()}}},[e._v("\n      Edit(Double-click node)\n    ")]),n("button",{on:{click:function(t){return e.$refs.chart.save()}}},[e._v("Save")])]),n("flowchart",{ref:"chart",attrs:{nodes:e.nodes,connections:e.connections,readonly:!1,render:e.render},on:{editnode:e.handleEditNode,dblclick:e.handleDblClick,editconnection:e.handleEditConnection,save:e.handleChartSave}}),n("node-dialog",{attrs:{visible:e.nodeDialogVisible,node:e.nodeForm.target},on:{"update:visible":function(t){e.nodeDialogVisible=t},"update:node":function(t){return e.$set(e.nodeForm,"target",t)}}}),n("connection-dialog",{attrs:{visible:e.connectionDialogVisible,connection:e.connectionForm.target,operation:e.connectionForm.operation},on:{"update:visible":function(t){e.connectionDialogVisible=t},"update:connection":function(t){return e.$set(e.connectionForm,"target",t)}}})],1)},i=[],a=(n("7f7f"),n("96cf"),n("3b8d")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.visible?n("div",{staticClass:"modal"},[e._m(0),n("div",{staticClass:"body"},[n("label",{attrs:{for:"name"}},[e._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.connectionForm.name,expression:"connectionForm.name"}],staticClass:"form-control",attrs:{id:"name"},domProps:{value:e.connectionForm.name},on:{input:function(t){t.target.composing||e.$set(e.connectionForm,"name",t.target.value)}}}),n("label",{attrs:{for:"type"}},[e._v("Type")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.connectionForm.type,expression:"connectionForm.type"}],staticClass:"form-control",attrs:{id:"type"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.connectionForm,"type",t.target.multiple?n:n[0])}}},e._l([{name:"Pass",id:"pass"},{name:"Reject",id:"reject"}],function(t){return n("option",{key:"connection-type-"+t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.name)+"\n                ")])}),0)]),n("div",{staticClass:"footer"},[n("button",{on:{click:e.handleClickCancelSaveConnection}},[e._v("Cancel")]),n("button",{on:{click:e.handleClickSaveConnection}},[e._v("Ok")])])]):e._e()])},c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("span",[e._v("Edit")])])}],l=(n("695b"),{props:{visible:{type:Boolean,default:!1},connection:{type:Object,default:null}},data:function(){return{connectionForm:{type:null,sourceId:null,sourcePosition:null,destinationId:null,destinationPosition:null,name:null,expression:null}}},methods:{handleClickSaveConnection:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("update:visible",!1),this.$emit("update:connection",Object.assign(this.connection,{name:this.connectionForm.name,type:this.connectionForm.type,expression:this.connectionForm.expression}));case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleClickCancelSaveConnection:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("update:visible",!1);case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},watch:{connection:{immediate:!0,handler:function(e){e&&(this.connectionForm.id=e.id,this.connectionForm.type=e.type,this.connectionForm.name=e.name,this.connectionForm.expression=e.expression)}}}}),u=l,d=n("2877"),h=Object(d["a"])(u,s,c,!1,null,null,null),f=h.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.visible?n("div",{staticClass:"modal"},[e._m(0),n("div",{staticClass:"body"},[n("div",{staticClass:"thumbnail",attrs:{id:"thumbnail"}},[n("img",{attrs:{src:e.nodeForm.thumbnail,alt:""}})]),n("label",{attrs:{for:"approver"}},[e._v("URL")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nodeForm.url,expression:"nodeForm.url"}],staticClass:"form-control",attrs:{id:"name"},domProps:{value:e.nodeForm.url},on:{input:function(t){t.target.composing||e.$set(e.nodeForm,"url",t.target.value)}}}),n("label",{attrs:{for:"name"}},[e._v("Title(Name)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nodeForm.name,expression:"nodeForm.name"}],staticClass:"form-control",attrs:{id:"title"},domProps:{value:e.nodeForm.name},on:{input:function(t){t.target.composing||e.$set(e.nodeForm,"name",t.target.value)}}}),n("label",{attrs:{for:"approver"}},[e._v("Summary(Approver)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nodeForm.summary,expression:"nodeForm.summary"}],staticClass:"form-control",attrs:{id:"approver"},domProps:{value:e.nodeForm.summary},on:{input:function(t){t.target.composing||e.$set(e.nodeForm,"summary",t.target.value)}}})]),n("div",{staticClass:"footer"},[n("button",{on:{click:e.handleClickCancelSaveNode}},[e._v("Cancel")]),n("button",{on:{click:e.handleClickSaveNode}},[e._v("Ok")])])]):e._e()])},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("span",[e._v("Edit")])])}],b={props:{visible:{type:Boolean,default:!1},node:{type:Object,default:null}},data:function(){return{nodeForm:{id:null,thumbnail:null,url:null,name:null,summary:null}}},methods:{handleClickSaveNode:function(){this.$emit("update:node",Object.assign(this.node,{name:this.nodeForm.name,thumbnail:this.nodeForm.thumbnail,summary:this.nodeForm.summary})),this.$emit("update:visible",!1)},handleClickCancelSaveNode:function(){this.$emit("update:visible",!1)},handleChangeApprover:function(e){this.nodeForm.summary=this.approvers.filter(function(t){return t.id===parseInt(e.target.value)})[0]}},watch:{node:{immediate:!0,handler:function(e){e&&(this.nodeForm.id=e.id,this.nodeForm.thumbnail=e.thumbnail,this.nodeForm.url=e.url,this.nodeForm.name=e.name,this.nodeForm.summary=e.summary)}}}},v=b,g=Object(d["a"])(v,p,m,!1,null,null,null),y=g.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{width:isNaN(e.width)?e.width:e.width+"px",height:isNaN(e.height)?e.height:e.height+"px",cursor:e.cursor},attrs:{id:"chart",tabindex:"0"},on:{mousemove:e.handleChartMouseMove,mouseup:e.handleChartMouseUp,dblclick:function(t){return e.handleChartDblClick(t)},mousewheel:e.handleChartMouseWheel,mousedown:function(t){return e.handleChartMouseDown(t)}}},[n("span",{staticClass:"unselectable",attrs:{id:"position"}},[e._v("\n    "+e._s(e.cursorToChartOffset.x+", "+e.cursorToChartOffset.y)+"\n  ")]),n("svg",{attrs:{id:"svg"}},[n("rect",{staticClass:"selection",attrs:{height:"0",width:"0"}})])])},k=[],w=n("7618"),C=(n("c7c6"),n("75fc")),N=(n("ac4d"),n("8a81"),n("ac6a"),n("84b4"),n("c5f6"),n("a481"),n("5698"));function F(e,t,n,r,o,i){var a=(r-t||1)/(n-e||1),s=t-a*e;return Math.abs(a*o-i+s)/Math.sqrt(a*a+1)}function O(e,t,n){return n>e&&n<t||n>t&&n<e}function E(e,t){return Math.abs(t-e)<=3}function D(e){var t=e.reduce(function(e,t){return t.x<e?t.x:e},1/0),n=e.reduce(function(e,t){return t.x>e?t.x:e},0),r=e.reduce(function(e,t){return t.y<e?t.y:e},1/0),o=e.reduce(function(e,t){return t.y>e?t.y:e},0);return{start:{x:t,y:r},end:{x:n,y:o}}}function _(e,t){return e.x>t.start.x&&e.x<t.end.x&&e.y>t.start.y&&e.y<t.end.y}function j(e,t,n,r,o,i,a,s){var c=[t,n],l=[r,o],u=N["c"]().x(function(e){return e[0]}).y(function(e){return e[1]}),d=e.append("path").attr("stroke","#7CF8FD").attr("stroke-width",3).attr("d",u([c,l]));return s&&d.style("stroke-dasharray",s.join(",")),d}function S(e,t,n,r,o,i,a,s,c,l){var u,d=[],h=[t,n],f=[r,o],p=h[0]+(f[0]-h[0])/2,m=h[1]+(f[1]-h[1])/2,b=function(){var e=[p,u[1]],t=[p,N[1]];d.push(e),d.push(t)},v=function(){var e=[u[0],m],t=[N[0],m];d.push(e),d.push(t)},g=function(){d.push([u[0],h[1]-50]),d.push([N[0],h[1]-50])},y=function(){d.push([u[0],h[1]+50]),d.push([N[0],h[1]+50])},x=function(){d.push([h[0]+80,u[1]]),d.push([h[0]+80,N[1]])},k=function(){d.push([h[0]-80,u[1]]),d.push([h[0]-80,N[1]])},w=function(){d.push([u[0],N[1]])},C=function(){d.push([N[0],u[1]])};switch(i){case"left":u=[h[0]-20,h[1]];break;case"top":u=[h[0],h[1]-20];break;case"bottom":u=[h[0],h[1]+20];break;default:u=[h[0]+20,h[1]];break}var N=null;switch(a){case"right":N=[f[0]+20,f[1]];break;case"top":N=[f[0],f[1]-20];break;case"bottom":N=[f[0],f[1]+20];break;default:N=[f[0]-20,f[1]];break}d.push(h),d.push(u),i=i||"right",a=a||"left";var F=T(t,n,r,o);switch(F.indexOf("r")>-1&&("right"!==i&&"left"!==a||(u[0]>p&&(u[0]=p),N[0]<p&&(N[0]=p))),F.indexOf("d")>-1&&("bottom"!==i&&"top"!==a||(u[1]>m&&(u[1]=m),N[1]<m&&(N[1]=m))),F.indexOf("l")>-1&&("left"!==i&&"right"!==a||(u[0]<p&&(u[0]=p),N[0]>p&&(N[0]=p))),F.indexOf("u")>-1&&("top"!==i&&"bottom"!==a||(u[1]<m&&(u[1]=m),N[1]>m&&(N[1]=m))),F){case"lu":if("right"===i)switch(a){case"top":case"right":w();break;default:v();break}else if("bottom"===i)switch(a){case"top":b();break;default:C();break}else if("top"===i)switch(a){case"top":case"right":w();break;default:v();break}else switch(a){case"top":case"right":b();break;default:C();break}break;case"u":if("right"===i)switch(a){case"right":break;case"top":w();break;default:v();break}else if("bottom"===i)switch(a){case"left":case"right":C();break;default:x();break}else if("top"===i)switch(a){case"left":C();break;case"right":v();break;case"top":x();break;default:break}else switch(a){case"left":case"right":break;default:d.push([u[0],N[1]]);break}break;case"ru":if("right"===i)switch(a){case"left":b();break;case"top":w();break;default:C();break}else if("bottom"===i)switch(a){case"top":b();break;default:C();break}else if("top"===i)switch(a){case"right":b();break;default:w();break}else switch(a){case"left":case"top":w();break;default:v();break}break;case"l":if("right"===i)switch(a){case"left":case"right":case"top":g();break;default:y();break}else if("bottom"===i)switch(a){case"left":y();break;case"right":w();break;case"top":b();break;default:break}else if("top"===i)switch(a){case"left":g();break;case"right":w();break;case"top":break;default:b();break}else switch(a){case"left":g();break;case"right":break;default:w();break}break;case"r":if("right"===i)switch(a){case"left":break;case"right":g();break;default:w();break}else if("bottom"===i)switch(a){case"left":w();break;case"right":y();break;case"top":b();break;default:break}else if("top"===i)switch(a){case"left":C();break;case"right":g();break;case"top":break;default:b();break}else switch(a){case"left":case"right":case"top":g();break;default:y();break}break;case"ld":if("right"===i)switch(a){case"left":v();break;default:w();break}else if("bottom"===i)switch(a){case"left":C();break;case"top":v();break;default:w();break}else if("top"===i)switch(a){case"left":case"right":case"top":C();break;default:b();break}else switch(a){case"left":case"top":C();break;case"right":b();break;default:w();break}break;case"d":if("right"===i)switch(a){case"left":v();break;case"right":C();break;case"top":w();break;default:x();break}else if("bottom"===i)switch(a){case"left":case"right":C();break;case"top":break;default:x();break}else if("top"===i)switch(a){case"left":k();break;default:x();break}else switch(a){case"left":break;case"right":v();break;case"top":w();break;default:k();break}break;case"rd":"right"===i&&"left"===a?b():"right"===i&&"bottom"===a?w():"right"===i&&"top"===a||"right"===i&&"right"===a?C():"bottom"===i&&"left"===a?w():"bottom"===i&&"right"===a?C():"bottom"===i&&"top"===a?v():"bottom"===i&&"bottom"===a?w():"top"===i&&"left"===a?C():"top"===i&&"right"===a?C():"top"===i&&"top"===a?C():"top"===i&&"bottom"===a?b():"left"===i&&"left"===a?w():"left"===i&&"right"===a?v():"left"===i&&"top"===a?v():"left"===i&&"bottom"===a&&w();break}d.push(N),d.push(f);for(var O=[],E=[],D=0;D<d.length;D++){var _=d[D],S=d[D+1];O.push({sourceX:_[0],sourceY:_[1],destinationX:S[0],destinationY:S[1]});var P=D===d.length-2;if(P&&l){var M=I(e,_[0],_[1],S[0],S[1],s,c);E.push(M);break}var $=j(e,_[0],_[1],S[0],S[1],s,c);if(E.push($),P)break}return{lines:O,paths:E}}function I(e,t,n,r,o,i,a){var s=j(e,t,n,r,o,i,a),c="arrow"+a.replace("#","");return e.append("marker").attr("id",c).attr("markerUnits","strokeWidth").attr("viewBox","0 0 12 12").attr("refX",9).attr("refY",6).attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2").attr("fill","#7CF8FD"),s.attr("marker-end","url(#"+c+")"),s}function T(e,t,n,r){return n<e&&E(r,t)?"l":n>e&&E(r,t)?"r":E(n,e)&&r<t?"u":E(n,e)&&r>t?"d":n<e&&r<t?"lu":n>e&&r<t?"ru":n<e&&r>t?"ld":"rd"}var P=n("cfb3"),M=n.n(P),$={name:"flowchart",props:{nodes:{type:Array,default:function(){return[{id:1,x:140,y:270,name:"Start",thumbnail:"start"},{id:2,x:540,y:270,name:"End",thumbnail:"end"}]}},connections:{type:Array,default:function(){return[{source:{id:1,position:"right"},destination:{id:2,position:"left"},id:1,type:"pass"}]}},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"100%"},readonly:{type:Boolean,default:!1},render:{type:Function,default:M.a}},data:function(){return{internalNodes:[],internalConnections:[],connectingInfo:{source:null,sourcePosition:null},selectionInfo:null,currentNodes:[],currentConnections:[],cursorToChartOffset:{x:0,y:0},clickedOnce:!1,pathClickedOnce:!1,lines:[]}},methods:{add:function(e){this.readonly||this.internalNodes.push(e)},editCurrent:function(){1===this.currentNodes.length?this.editNode(this.currentNodes[0]):1===this.currentConnections.length&&this.editConnection(this.currentConnections[0])},editNode:function(e){this.readonly||this.$emit("editnode",e)},editConnection:function(e){this.readonly||this.$emit("editconnection",e)},handleChartMouseWheel:function(e){if(e.stopPropagation(),e.preventDefault(),e.ctrlKey){var t=document.getElementById("svg"),n=parseFloat(t.style.zoom||1);if(e.deltaY>0&&.1===n)return;n-=e.deltaY/100/10,t.style.zoom=n}},handleChartMouseUp:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.connectingInfo.source&&(this.hoveredConnector&&this.connectingInfo.source.id!==this.hoveredConnector.node.id&&(t=+new Date,n={source:{id:this.connectingInfo.source.id,position:this.connectingInfo.sourcePosition},destination:{id:this.hoveredConnector.node.id,position:this.hoveredConnector.position},id:t,type:"pass",name:"Pass"},this.internalConnections.push(n)),this.connectingInfo.source=null,this.connectingInfo.sourcePosition=null),this.selectionInfo&&(this.selectionInfo=null);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleChartMouseMove:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r,o,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.currentTarget.getBoundingClientRect(),r=t.pageX-n.left-window.scrollX,this.cursorToChartOffset.x=Math.trunc(r),o=t.pageY-n.top-window.scrollY,this.cursorToChartOffset.y=Math.trunc(o),!this.connectingInfo.source){e.next=12;break}return e.next=8,this.renderConnections();case 8:N["e"]("#svg .connector").classed("active",!0),i=this.getNodeConnectorOffset(this.connectingInfo.source.id,this.connectingInfo.sourcePosition),a=this.hoveredConnector?this.hoveredConnector.position:null,this.arrowTo(i.x,i.y,this.cursorToChartOffset.x,this.cursorToChartOffset.y,this.connectingInfo.sourcePosition,a);case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleChartDblClick:function(e){this.readonly||this.$emit("dblclick",{x:e.offsetX,y:e.offsetY})},handleChartMouseDown:function(e){e.ctrlKey||(this.selectionInfo={x:e.offsetX,y:e.offsetY})},getConnectorPosition:function(e){var t=e.width/2,n=e.height/2,r={x:e.x+t,y:e.y},o={x:e.x,y:e.y+n},i={x:e.x+t,y:e.y+e.height},a={x:e.x+e.width,y:e.y+n};return{left:o,right:a,top:r,bottom:i}},renderSelection:function(){var e=this;if(e.selectionInfo){e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length);var t=D([{x:e.selectionInfo.x,y:e.selectionInfo.y},{x:e.cursorToChartOffset.x,y:e.cursorToChartOffset.y}]),n=N["d"]("#svg"),r=n.select(".selection").classed("active",!0);r.attr("x",t.start.x).attr("y",t.start.y).attr("width",t.end.x-t.start.x).attr("height",t.end.y-t.start.y),e.internalNodes.forEach(function(n){var r=[{x:n.x,y:n.y},{x:n.x,y:n.y+n.height},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height}];r.every(function(e){return _(e,t)})&&e.currentNodes.push(n)}),e.lines.forEach(function(n){var r=[{x:n.sourceX,y:n.sourceY},{x:n.destinationX,y:n.destinationY}];if(r.every(function(e){return _(e,t)})&&e.currentConnections.every(function(e){return e.id!==n.id})){var o=e.internalConnections.filter(function(e){return e.id===n.id})[0];e.currentConnections.push(o)}})}else N["e"]("#svg > .selection").classed("active",!1)},renderConnections:function(){var e=this;return new Promise(function(t){e.$nextTick(function(){N["e"]("#svg > g.connection").remove(),e.lines=[],e.internalConnections.forEach(function(t){var n=e.getNodeConnectorOffset(t.source.id,t.source.position),r=e.getNodeConnectorOffset(t.destination.id,t.destination.position),o={pass:"#52c41a",reject:"red"};e.currentConnections.filter(function(e){return e===t}).length>0&&(o={pass:"#12640a",reject:"darkred"});var i=e.arrowTo(n.x,n.y,r.x,r.y,t.source.position,t.destination.position,o[t.type],t.name),a=!0,s=!1,c=void 0;try{for(var l,u=i.paths[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var d=l.value;d.on("mousedown",function(){if(N["b"].stopPropagation(),e.pathClickedOnce)e.editConnection(t);else{var n=setTimeout(function(){e.pathClickedOnce=!1,clearTimeout(n)},300);e.pathClickedOnce=!0}e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length),e.currentConnections.push(t)})}}catch(g){s=!0,c=g}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}var h=!0,f=!1,p=void 0;try{for(var m,b=i.lines[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){var v=m.value;e.lines.push({sourceX:v.sourceX,sourceY:v.sourceY,destinationX:v.destinationX,destinationY:v.destinationY,id:t.id})}}catch(g){f=!0,p=g}finally{try{h||null==b.return||b.return()}finally{if(f)throw p}}}),t()})})},renderNodes:function(){var e=this;return new Promise(function(t){N["e"]("#svg > g.node").remove(),e.internalNodes.forEach(function(t){e.renderNode(t,e.currentNodes.filter(function(e){return e===t}).length>0)}),t()})},getNodeConnectorOffset:function(e,t){var n=this.internalNodes.filter(function(t){return t.id===e})[0];return this.getConnectorPosition(n)[t]},append:function(e){var t=N["d"]("#svg");return t.insert(e,".selection")},guideLineTo:function(e,t,n,r){var o=this.append("g");o.classed("guideline",!0),j(o,e,t,n,r,1,"#a3a3a3",[5,3])},arrowTo:function(e,t,n,r,o,i,a,s){var c=this.append("g");return c.append("text").attr("fill","#7CF8FD").attr("x",n+10).attr("y",r-40).style("width","10px").style("height","10px").text(s),c.classed("connection",!0),S(c,e,t,n,r,o,i,1,a||"#a3a3a3",!0),S(c,e,t,n,r,o,i,5,"transparent",!1)},renderNode:function(e,t){var n=this,r=n.append("g").attr("cursor","move").classed("node",!0);e.render=n.render,e.render(r,e,t);var o=N["a"]().on("start",function(){var t=0===n.currentNodes.filter(function(t){return t===e}).length;if(t&&(n.currentConnections.splice(0,n.currentConnections.length),n.currentNodes.splice(0,n.currentNodes.length),n.currentNodes.push(e)),n.clickedOnce)n.currentNodes.splice(0,n.currentNodes.length),n.editNode(e);else{var r=setTimeout(function(){n.clickedOnce=!1,clearTimeout(r)},300);n.clickedOnce=!0}}).on("drag",Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,o,i,a,s,c,l,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n.readonly){e.next=2;break}return e.abrupt("return");case 2:for(t=parseFloat(document.getElementById("svg").style.zoom||1),r=!0,o=!1,i=void 0,e.prev=6,a=n.currentNodes[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)c=s.value,c.x+=N["b"].dx/t,c.y+=N["b"].dy/t;e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),o=!0,i=e.t0;case 14:e.prev=14,e.prev=15,r||null==a.return||a.return();case 17:if(e.prev=17,!o){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:N["e"]("#svg > g.guideline").remove(),l=n.getCurrentNodesEdge(),u=10*Math.round(Math.round(l.start.x)/10),d=10*Math.round(Math.round(l.start.y)/10),n.internalNodes.forEach(function(e){0===n.currentNodes.filter(function(t){return t===e}).length&&(e.x===u&&(e.y<d?n.guideLineTo(e.x,e.y+e.height,u,d):n.guideLineTo(u,d+e.height,e.x,e.y)),e.y===d&&(e.x<u?n.guideLineTo(e.x+e.width,e.y,u,d):n.guideLineTo(u+e.width,d,e.x,e.y)))});case 27:case"end":return e.stop()}},e,null,[[6,10,14,22],[15,,17,21]])}))).on("end",function(){N["e"]("#svg > g.guideline").remove();var e=!0,t=!1,r=void 0;try{for(var o,i=n.currentNodes[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;a.x=10*Math.round(Math.round(a.x)/10),a.y=10*Math.round(Math.round(a.y)/10)}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}});r.call(o),r.on("mousedown",function(){if(N["b"].ctrlKey){var t=0===n.currentNodes.filter(function(t){return t===e}).length;t?n.currentNodes.push(e):n.currentNodes.splice(n.currentNodes.indexOf(e),1)}});var i=[],s=this.getConnectorPosition(e),c=function(t){var o=s[t],a=r.append("circle").attr("cx",o.x).attr("cy",o.y).attr("r",4).attr("class","connector");a.on("mousedown",function(){N["b"].stopPropagation(),"end"===e.type||n.readonly||(n.connectingInfo.source=e,n.connectingInfo.sourcePosition=t)}).on("mouseup",function(){if(N["b"].stopPropagation(),n.connectingInfo.source){if(n.connectingInfo.source.id!==e.id){var r=+new Date,o={source:{id:n.connectingInfo.source.id,position:n.connectingInfo.sourcePosition},destination:{id:e.id,position:t},id:r,type:"pass",name:"Pass"};n.internalConnections.push(o)}n.connectingInfo.source=null,n.connectingInfo.sourcePosition=null}}).on("mouseover",function(){a.classed("active",!0)}).on("mouseout",function(){a.classed("active",!1)}),i.push(a)};for(var l in s)c(l);r.on("mouseover",function(){i.forEach(function(e){return e.classed("active",!0)})}).on("mouseout",function(){i.forEach(function(e){return e.classed("active",!1)})})},getCurrentNodesEdge:function(){var e=this.currentNodes.map(function(e){return{x:e.x,y:e.y}});return e.push.apply(e,Object(C["a"])(this.currentNodes.map(function(e){return{x:e.x+e.width,y:e.y+e.height}}))),D(e)},save:function(){this.readonly||this.$emit("save",this.internalNodes,this.internalConnections)},remove:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,s,c,l,u,d,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.readonly){e.next=2;break}return e.abrupt("return");case 2:if(!(this.currentConnections.length>0)){e.next=23;break}for(t=!0,n=!1,r=void 0,e.prev=6,o=this.currentConnections[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)a=i.value,this.removeConnection(a);e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),n=!0,r=e.t0;case 14:e.prev=14,e.prev=15,t||null==o.return||o.return();case 17:if(e.prev=17,!n){e.next=20;break}throw r;case 20:return e.finish(17);case 21:return e.finish(14);case 22:this.currentConnections.splice(0,this.currentConnections.length);case 23:if(!(this.currentNodes.length>0)){e.next=44;break}for(s=!0,c=!1,l=void 0,e.prev=27,u=this.currentNodes[Symbol.iterator]();!(s=(d=u.next()).done);s=!0)h=d.value,this.removeNode(h);e.next=35;break;case 31:e.prev=31,e.t1=e["catch"](27),c=!0,l=e.t1;case 35:e.prev=35,e.prev=36,s||null==u.return||u.return();case 38:if(e.prev=38,!c){e.next=41;break}throw l;case 41:return e.finish(38);case 42:return e.finish(35);case 43:this.currentNodes.splice(0,this.currentNodes.length);case 44:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21],[27,31,35,43],[36,,38,42]])}));function t(){return e.apply(this,arguments)}return t}(),removeNode:function(e){var t=this.internalConnections.filter(function(t){return t.source.id===e.id||t.destination.id===e.id}),n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;this.internalConnections.splice(this.internalConnections.indexOf(s),1)}}catch(c){r=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}this.internalNodes.splice(this.internalNodes.indexOf(e),1)},removeConnection:function(e){var t=this.internalConnections.indexOf(e);this.internalConnections.splice(t,1)},moveCurrentNode:function(e,t){if(this.currentNodes.length>0&&!this.readonly){var n=!0,r=!1,o=void 0;try{for(var i,a=this.currentNodes[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.x+=e,s.y+=t}}catch(c){r=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}},init:function(){var e=this;e.internalNodes.splice(0,e.internalNodes.length),e.internalConnections.splice(0,e.internalConnections.length),e.nodes.forEach(function(t){var n=Object.assign({},t);n.width=n.width||400,n.height=n.height||200,e.internalNodes.push(n)}),e.connections.forEach(function(t){e.internalConnections.push(JSON.parse(JSON.stringify(t)))})}},mounted:function(){var e=this;e.init(),document.onkeydown=function(t){switch(t.keyCode){case 37:e.moveCurrentNode(-10,0);break;case 38:e.moveCurrentNode(0,-10);break;case 39:e.moveCurrentNode(10,0);break;case 40:e.moveCurrentNode(0,10);break;case 27:e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length);break;case 65:var n,r;if(document.activeElement===document.getElementById("chart"))e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length),(n=e.currentNodes).push.apply(n,Object(C["a"])(e.internalNodes)),(r=e.currentConnections).push.apply(r,Object(C["a"])(e.internalConnections)),t.preventDefault();break;case 46:e.remove();break;default:break}}},created:function(){},computed:{hoveredConnector:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.internalNodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,a=this.getConnectorPosition(i);for(var s in a){var c=a[s];if(Math.hypot(c.x-this.cursorToChartOffset.x,c.y-this.cursorToChartOffset.y)<10)return{position:s,node:i}}}}catch(l){t=!0,n=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return null},hoveredConnection:function(){var e=this,t=!0,n=!1,r=void 0;try{for(var o,i=function(){var t=o.value,n=F(t.sourceX,t.sourceY,t.destinationX,t.destinationY,e.cursorToChartOffset.x,e.cursorToChartOffset.y);if(n<5&&O(t.sourceX-2,t.destinationX+2,e.cursorToChartOffset.x)&&O(t.sourceY-2,t.destinationY+2,e.cursorToChartOffset.y)){var r=e.internalConnections.filter(function(e){return e.id===t.id});return{v:r.length>0?r[0]:null}}},a=this.lines[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=i();if("object"===Object(w["a"])(s))return s.v}}catch(c){n=!0,r=c}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null},cursor:function(){return this.connectingInfo.source||this.hoveredConnector?"crosshair":null!=this.hoveredConnection?"pointer":null}},watch:{internalNodes:{immediate:!0,deep:!0,handler:function(){this.renderNodes(),this.renderConnections()}},internalConnections:{immediate:!0,deep:!0,handler:function(){this.renderConnections()}},selectionInfo:{immediate:!0,deep:!0,handler:function(){this.renderSelection()}},currentNodes:{immediate:!0,deep:!0,handler:function(){this.renderNodes()}},currentConnections:{immediate:!0,deep:!0,handler:function(){this.renderConnections()}},cursorToChartOffset:{immediate:!0,deep:!0,handler:function(){this.selectionInfo&&this.renderSelection()}},connectingInfo:{immediate:!0,deep:!0,handler:function(){this.renderConnections()}},nodes:{immediate:!0,deep:!0,handler:function(){this.init()}},connections:{immediate:!0,deep:!0,handler:function(){this.init()}}}},A=$,Y=(n("369f"),Object(d["a"])(A,x,k,!1,null,null,null)),R=Y.exports,z={components:{ConnectionDialog:f,NodeDialog:y,Flowchart:R},data:function(){return{nodes:[{id:1,x:200,y:50,thumbnail:"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2&w=1200&mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3DDocker%25E3%2581%25A8%25E3%2581%25AF%25E3%2581%25A9%25E3%2581%2586%25E3%2581%2584%25E3%2581%25A3%25E3%2581%259F%25E3%2582%2582%25E3%2581%25AE%25E3%2581%25AA%25E3%2581%25AE%25E3%2581%258B%25E3%2580%2581%25E3%2582%2581%25E3%2581%25A1%25E3%2582%2583%25E3%2581%258F%25E3%2581%25A1%25E3%2582%2583%25E4%25B8%2581%25E5%25AF%25A7%25E3%2581%25AB%25E8%25AA%25AC%25E6%2598%258E%25E3%2581%2597%25E3%2581%25A6%25E3%2581%25BF%25E3%2582%258B%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3Da74a6782c81bee821aa421a1037a1cc0&mark-align=center%2Cmiddle&blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540SatoshiSobue%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3Dca9d81597f6bcfd55d58a95dc4c5f445&blend-align=center%2Cmiddle&blend-mode=normal&s=6d406ff15d17893a52ab77ba3ebd9d33",url:"https://qiita.com/SatoshiSobue/items/a612ebbb3a9242c09db5",name:"Dockerとはどういったものなのか、めちゃくちゃ丁寧に説明してみる - Qiita",summary:"仮想化などDockerの周辺知識も含めて丁寧に解説されている。"},{id:2,x:200,y:300,thumbnail:"https://res.cloudinary.com/practicaldev/image/fetch/s--Zm43GYiy--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/i/e4jmzv9o1ivd3yz2kj8a.png",url:"https://dev.to/mizuki04/tips-docker-5bfj",name:"[Tips] 中銀カプセルタワービル=Docker説 - DEV",summary:"Dockerの概要が面白い例えで紹介されている。イメージをつかめる。\t"},{id:4,x:50,y:700,thumbnail:"https://img-a.udemycdn.com/course/480x270/3207931_c941.jpg",url:"https://www.udemy.com/course/aidocker/",name:"米国AI開発者がゼロから教えるDocker講座",summary:"インプットしているだけではわからないので、手を動かして覚える。過去一わかりやすい動画。\t"},{id:5,x:400,y:700,thumbnail:"https://i.ytimg.com/vi/Fq1PH0Gwi8I/hqdefault.jpg",url:"https://www.youtube.com/watch?v=Fq1PH0Gwi8I",name:"【rails環境構築】docker + rails + mysql で環境構築（初心者でも30分で完了！）",summary:"無料がいい方はこちら。\t"}],connections:[{source:{id:1,position:"bottom"},destination:{id:2,position:"top"},id:1,type:"pass",name:"たとえ話でイメージをつかむ"},{source:{id:2,position:"bottom"},destination:{id:4,position:"top"},id:2,type:"pass",name:"実際に手を動かす"},{source:{id:2,position:"bottom"},destination:{id:5,position:"top"},id:3,type:"pass",name:"実際に手を動かす"}],nodeForm:{target:null},connectionForm:{target:null,operation:null},nodeDialogVisible:!1,connectionDialogVisible:!1}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),methods:{handleDblClick:function(e){this.$refs.chart.add({id:+new Date,x:10,y:10,thumbnail:"https://placehold.jp/150x100.png",url:"",name:"Title",summary:"Summary"})},handleChartSave:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),handleEditNode:function(e){this.nodeForm.target=e,this.nodeDialogVisible=!0},handleEditConnection:function(e){this.connectionForm.target=e,this.connectionDialogVisible=!0},render:function(e,t,n){t.width=t.width||400,t.height=t.height||200;e.append("foreignObject").attr("x",t.x).attr("y",t.y).style("width",3*t.width/8+"px").style("height",t.height/2+"px").append("xhtml:div").style("width",3*t.width/8+"px").style("height",t.height/2+"px").style("background-image","url(".concat(t.thumbnail,")")).style("background-position","center center").style("background-size","cover").style("background-repeat","no-repeat").style("border-radius","6px 0 0 0").style("box-sizing","border-box").style("border-top","1px solid white").style("border-left","1px solid white"),e.append("foreignObject").attr("x",t.x+3*t.width/8).attr("y",t.y).attr("class","title").style("width",5*t.width/8+"px").style("height",t.height/2+"px").append("xhtml:div").style("width",5*t.width/8+"px").style("height",t.height/2+"px").style("background-color","#3F3F3F").style("border-radius","0 6px 0 0").style("box-sizing","border-box").style("border-top","1px solid white").style("border-right","1px solid white"),e.append("foreignObject").attr("x",t.x+3*t.width/8).attr("y",t.y).attr("class","unselectable").style("width",5*t.width/8+"px").style("height",t.height/2+"px").style("display","table").append("xhtml:p").style("display","table-cell").style("vertical-align","middle").style("width",5*t.width/8+"px").style("height",t.height/2+"px").style("box-sizing","border-box").style("padding","4px 8px 4px 8px").style("color","white").style("font-weight","bold").style("margin",0).style("overflow-wrap","break-word").text(function(){return t.name}),e.append("foreignObject").attr("x",t.x).attr("y",t.y+t.height/2).style("width",t.width+"px").style("height",t.height/2+"px").append("xhtml:div").style("width",t.width+"px").style("height",t.height/2+"px").style("background-color","#707070").style("box-sizing","border-box").style("border-radius","0 0 6px 6px").style("border-bottom","1px solid white").style("border-right","1px solid white").style("border-left","1px solid white"),e.append("foreignObject").attr("x",t.x).attr("y",t.y+t.height/2).attr("class","unselectable").style("width",t.width+"px").style("height",t.height/2+"px").append("xhtml:p").style("width",t.width+"px").style("height",t.height/2+"px").style("box-sizing","border-box").style("padding","4px 8px 4px 8px").style("color","white").style("margin",0).style("overflow-wrap","break-word").text(function(){return t.summary})}}},X=z,B=(n("5b19"),Object(d["a"])(X,o,i,!1,null,"71e41d3a",null)),q=B.exports;r["a"].config.productionTip=!1,new r["a"]({el:"#app",mounted:function(){},components:{App:q}})},"5b19":function(e,t,n){"use strict";var r=n("8caa"),o=n.n(r);o.a},"695b":function(e,t,n){var r=n("3900");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=n("499e").default;o("e65d5572",r,!0,{sourceMap:!1,shadowMode:!1})},"7e29":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"#toolbar[data-v-71e41d3a]{margin-bottom:10px}.title[data-v-71e41d3a]{margin-top:10px;margin-bottom:0}.subtitle[data-v-71e41d3a]{margin-bottom:10px}#toolbar>button[data-v-71e41d3a]{margin-right:4px}.container[data-v-71e41d3a]{width:96%;margin:auto;height:80vh}",""])},"8caa":function(e,t,n){var r=n("7e29");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=n("499e").default;o("acec3630",r,!0,{sourceMap:!1,shadowMode:!1})},cfb3:function(e,t){}});
//# sourceMappingURL=app.87e16c0a.js.map